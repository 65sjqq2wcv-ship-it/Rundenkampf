<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <!-- Content Security Policy -->
    <meta
      http-equiv="Content-Security-Policy"
      content="
    default-src 'self';
    script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com;
    style-src 'self' 'unsafe-inline';
    img-src 'self' data: blob:;
    connect-src 'self';
    font-src 'self';
    object-src 'none';
    base-uri 'self';
    form-action 'self';
    frame-ancestors 'none';
    upgrade-insecure-requests;
    block-all-mixed-content;
"
    />
    <title>Rundenkampfbericht</title>
    <meta name="theme-color" content="#2d3748" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="Rundenkampf" />

    <!-- iOS Icons -->
    <link rel="apple-touch-icon" href="icons/icon-192x192.png" />
    <link
      rel="apple-touch-icon"
      sizes="192x192"
      href="icons/icon-192x192.png"
    />

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json" />

    <style>
      /* Querformat-Warnung */
      .landscape-warning {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.95);
        color: white;
        text-align: center;
        z-index: 10000;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
      }

      .landscape-content {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        padding: 20px;
      }

      .rotate-icon {
        font-size: 60px;
        margin: 20px 0;
        animation: rotate 2s infinite ease-in-out;
      }

      @keyframes rotate {
        0%,
        100% {
          transform: rotate(0deg);
        }
        50% {
          transform: rotate(90deg);
        }
      }

      /* Zeige Warnung nur bei Querformat auf kleinen Bildschirmen */
      @media screen and (orientation: landscape) and (max-height: 500px) {
        .landscape-warning {
          display: block;
        }

        #app {
          display: none;
        }
      }
    </style>

    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <div id="app">
      <nav class="navbar">
        <h1 class="nav-title">Rundenkampfbericht</h1>
        <div class="nav-buttons" id="navButtons"></div>
      </nav>

      <main class="main-content" id="mainContent">
        <div class="card" style="text-align: center">
          <div class="spinner"></div>
          <p>Lade Anwendung...</p>
        </div>
      </main>

      <div class="tab-bar">
        <button class="tab-item active" data-tab="overview">
          <span class="tab-icon">üìä</span>
          <span class="tab-label">√úbersicht</span>
        </button>
        <button class="tab-item" data-tab="entry">
          <span class="tab-icon">‚úèÔ∏è</span>
          <span class="tab-label">Erfassen</span>
        </button>
        <button class="tab-item" data-tab="teams">
          <span class="tab-icon">üë•</span>
          <span class="tab-label">Teams</span>
        </button>
        <button class="tab-item" data-tab="settings">
          <span class="tab-icon">‚öôÔ∏è</span>
          <span class="tab-label">Einstellungen</span>
        </button>
      </div>
    </div>

    <!-- NEU: Querformat-Warnung -->
    <div class="landscape-warning">
      <div class="landscape-content">
        <h2>üì± Bitte Ger√§t drehen</h2>
        <div class="rotate-icon">üì±</div>
        <p style="font-size: 18px; margin: 20px 0">
          Diese App funktioniert am besten<br />
          im <strong>Hochformat</strong>.
        </p>
        <p style="font-size: 14px; color: #ccc">
          Drehen Sie Ihr Ger√§t f√ºr die beste Erfahrung.
        </p>
      </div>
    </div>

    <!-- Scripts in der richtigen Reihenfolge -->
    <script src="js/version.js"></script>
    <script src="js/exif-writer.js"></script>
    <!-- NEU - nur diese eine Zeile -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="js/models.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/views/overview-view.js"></script>
    <script src="js/views/entry-view.js"></script>
    <script src="js/views/teams-view.js"></script>
    <script src="js/views/settings-view.js"></script>
    <script src="js/pdf-exporter.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>
